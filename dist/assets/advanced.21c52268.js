import{c as K,A as H,a as Q,S as B,T as F,b as D,d as _,C as W}from"./pixi.94a595d1.js";import{G as Z}from"./dat.gui.module.6914edc7.js";var J={exports:{}};(function(a,r){(function(c,h){a.exports=h()})(K,function(){var c=function(){var h=0,i=document.createElement("div");function d(t){return i.appendChild(t.dom),t}function u(t){for(var l=0;l<i.children.length;l++)i.children[l].style.display=l===t?"block":"none";h=t}i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",function(t){t.preventDefault(),u(++h%i.children.length)},!1);var m=(performance||Date).now(),f=m,e=0,E=d(new c.Panel("FPS","#0ff","#002")),I=d(new c.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var M=d(new c.Panel("MB","#f08","#201"));return u(0),{REVISION:16,dom:i,addPanel:d,showPanel:u,begin:function(){m=(performance||Date).now()},end:function(){e++;var t=(performance||Date).now();if(I.update(t-m,200),f+1e3<=t&&(E.update(1e3*e/(t-f),100),f=t,e=0,M)){var l=performance.memory;M.update(l.usedJSHeapSize/1048576,l.jsHeapSizeLimit/1048576)}return t},update:function(){m=this.end()},domElement:i,setMode:u}};return c.Panel=function(h,i,d){var u=1/0,m=0,f=Math.round,e=f(window.devicePixelRatio||1),E=80*e,I=48*e,M=3*e,t=2*e,l=3*e,S=15*e,C=74*e,v=30*e,y=document.createElement("canvas");y.width=E,y.height=I,y.style.cssText="width:80px;height:48px";var o=y.getContext("2d");return o.font="bold "+9*e+"px Helvetica,Arial,sans-serif",o.textBaseline="top",o.fillStyle=d,o.fillRect(0,0,E,I),o.fillStyle=i,o.fillText(h,M,t),o.fillRect(l,S,C,v),o.fillStyle=d,o.globalAlpha=.9,o.fillRect(l,S,C,v),{dom:y,update:function(P,q){u=Math.min(u,P),m=Math.max(m,P),o.fillStyle=d,o.globalAlpha=1,o.fillRect(0,0,E,S),o.fillStyle=i,o.fillText(f(P)+" "+h+" ("+f(u)+"-"+f(m)+")",M,t),o.drawImage(y,l+e,S,C-e,v,l,S,C-e,v),o.fillRect(l+C-e,S,e,v),o.fillStyle=d,o.globalAlpha=.9,o.fillRect(l+C-e,S,e,f((1-P/q)*v))}}},c})})(J);var ee=J.exports;H.registerPlugin(Q);const g={followMouse:!1,shadowX:450,shadowY:150},oe=800,ae=500,s=new H({width:oe,height:ae});document.body.appendChild(s.view);const p=s.shadows.container;s.shadows.filter.useShadowCasterAsOverlay=!1;function N(a,r,c){const h=new W;if(r){const d=new D(r);d.parentGroup=s.shadows.casterGroup,h.addChild(d)}if(c){const d=new D(c);d.parentGroup=s.shadows.overlayGroup,h.addChild(d)}const i=new D(a);return h.addChild(i),h}const n=new B(700,1);n.position.set(g.shadowX,g.shadowY);p.addChild(n);const te=F.from("../../assets/background.jpg"),se=new D(te);p.addChild(se);const k=F.from("../../assets/flameDemon.png"),V=F.from("../../assets/flameDemonShadow.png"),x=F.from("../../assets/flameDemon2.png");k.baseTexture.scaleMode=_.NEAREST;V.baseTexture.scaleMode=_.NEAREST;x.baseTexture.scaleMode=_.NEAREST;const R=N(x,x);R.position.set(100,100);R.scale.set(3);p.addChild(R);const X=N(k,V,k);X.position.set(500,100);X.scale.set(3);p.addChild(X);const Y=N(x,x,x);Y.position.set(300,200);Y.scale.set(3);p.addChild(Y);p.interactive=!0;p.on("mousemove",a=>{g.followMouse?n.position.copyFrom(a.data.global):(n.position.x=g.shadowX,n.position.y=g.shadowY)});const U=[];p.on("pointerdown",a=>{const r=new B(700,.7);U.push(r),r.position.copyFrom(a.data.global),p.addChild(r),G["placed shadows"]&&(r.ignoreShadowCaster=R.children[0])});const b=new ee;b.setMode(0);document.body.appendChild(b.domElement);b.domElement.style.position="absolute";b.domElement.style.top="0";s.ticker.add(()=>{b.begin(),b.end()});const T=new Z,O=T.addFolder("Demo options");O.open();O.add(g,"followMouse");O.add(g,"shadowX",0,800);O.add(g,"shadowY",0,600);const w=T.addFolder("Shadow properties");w.open();w.add(n,"range",50,1e3);w.add(n,"intensity",0,3);w.add(n,"pointCount",1,50,1);w.add(n,"scatterRange",0,50);w.add(n,"radialResolution",100,1500,1);w.add(n,"depthResolution",.1,3);w.add(n,"overlayLightLength",10,1e3);w.add(n,"darkenOverlay");const L=s.shadows.filter,A=T.addFolder("Filter properties");A.open();A.add(L,"width",100,1920,1);A.add(L,"height",100,1080,1);A.add(L,"ambientLight",0,1,.01);A.add(L,"useShadowCasterAsOverlay");const $=T.addFolder("Ignore caster per shadow"),G={};G["main shadow"]=!1;G["placed shadows"]=!1;$.add(G,"main shadow").onChange(a=>{a?n.ignoreShadowCaster=R.children[0]:n.ignoreShadowCaster=null});$.add(G,"placed shadows").onChange(a=>{for(let r=0;r<U.length;r++){const c=U[r];a?c.ignoreShadowCaster=R.children[0]:c.ignoreShadowCaster=null}});const j=T.addFolder("Show layers (for debugging)"),z={textures:!1,casters:!1,overlays:!1};j.add(z,"textures").onChange(a=>{a?p.filters=[]:p.filters=[s.shadows.filter]});j.add(z,"casters").onChange(a=>{a?s.stage.addChild(s.shadows.filter._shadowCasterResultSprite):s.stage.removeChild(s.shadows.filter._shadowCasterResultSprite)});j.add(z,"overlays").onChange(a=>{a?s.stage.addChild(s.shadows.filter._shadowOverlayResultSprite):s.stage.removeChild(s.shadows.filter._shadowOverlayResultSprite)});
